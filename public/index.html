<!DOCTYPE html>
<html>
<head>
    <title>CCUI Raw Interface</title>
    
    <!-- JSON Viewer Web Component -->
    <script src="https://unpkg.com/@alenaksu/json-viewer@2.1.0/dist/json-viewer.bundle.js"></script>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- External JavaScript -->
    <script src="app.js" defer></script>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <h1>CCUI Raw JSON Interface</h1>
            
            <!-- System Status -->
            <div class="section">
                <div class="endpoint collapsible collapsed" onclick="toggleCollapse(this)">GET /api/system/status</div>
                <div class="collapsible-content">
                    <button onclick="getSystemStatus()">Get Status</button>
                    <div id="statusResult" class="json-viewer-container"></div>
                </div>
            </div>
            
            <!-- Start Conversation -->
            <div class="section">
                <div class="endpoint collapsible collapsed" onclick="toggleCollapse(this)">POST /api/conversations/start</div>
                <div class="collapsible-content">
                    <div class="field-group">
                        <div class="field-label">Working Directory <span style="color: red;">*</span></div>
                        <input type="text" id="workingDir" placeholder="/Users/..." value="/tmp">
                    </div>
                    <div class="field-group">
                        <div class="field-label">Initial Prompt <span style="color: red;">*</span></div>
                        <textarea id="initialPrompt" rows="3" placeholder="Your prompt here...">Hello</textarea>
                    </div>
                    <div class="field-group">
                        <div class="field-label">Model <span class="optional">(optional)</span></div>
                        <select id="model">
                            <option value="">Default</option>
                            <option value="claude-3-opus-20240229">Claude 3 Opus</option>
                            <option value="claude-3-sonnet-20240229">Claude 3 Sonnet</option>
                            <option value="claude-3-haiku-20240307">Claude 3 Haiku</option>
                            <option value="claude-3-5-sonnet-20241022">Claude 3.5 Sonnet</option>
                        </select>
                    </div>
                    <div class="field-group">
                        <div class="field-label">System Prompt <span class="optional">(optional)</span></div>
                        <textarea id="systemPrompt" rows="2" placeholder="System prompt..."></textarea>
                    </div>
                    <div class="field-group">
                        <div class="field-label">Claude Executable Path <span class="optional">(optional)</span></div>
                        <input type="text" id="claudeExecutablePath" placeholder="/usr/local/bin/claude">
                    </div>
                    <button onclick="startConversation()">Start Conversation</button>
                    <div id="startResult" class="json-viewer-container"></div>
                </div>
            </div>
            
            <!-- Resume Conversation -->
            <div class="section">
                <div class="endpoint collapsible collapsed" onclick="toggleCollapse(this)">POST /api/conversations/resume</div>
                <div class="collapsible-content">
                    <div class="field-group">
                        <div class="field-label">Session ID <span style="color: red;">*</span></div>
                        <select id="sessionIdDropdown" onchange="onSessionSelect('sessionId', 'sessionIdDropdown')" style="margin-bottom: 5px;">
                            <option value="">Select a session...</option>
                        </select>
                        <input type="text" id="sessionId" placeholder="claude-session-id or select from dropdown">
                    </div>
                    <div class="field-group">
                        <div class="field-label">Message <span style="color: red;">*</span></div>
                        <input type="text" id="resumeMessage" placeholder="Continue with this message...">
                    </div>
                    <button onclick="resumeConversation()">Resume Conversation</button>
                    <div id="resumeResult" class="json-viewer-container"></div>
                </div>
            </div>
            
            <!-- Stop Conversation -->
            <div class="section">
                <div class="endpoint collapsible collapsed" onclick="toggleCollapse(this)">POST /api/conversations/:streamingId/stop</div>
                <div class="collapsible-content">
                    <div class="field-group">
                        <div class="field-label">Streaming ID <span style="color: red;">*</span></div>
                        <input type="text" id="stopStreamingId" placeholder="streaming-id">
                    </div>
                    <button onclick="stopConversation()">Stop Conversation</button>
                    <div id="stopResult" class="json-viewer-container"></div>
                </div>
            </div>
            
            <!-- List Conversations -->
            <div class="section">
                <div class="endpoint collapsible collapsed" onclick="toggleCollapse(this)">GET /api/conversations</div>
                <div class="collapsible-content">
                    <div class="field-group">
                        <div class="inline-fields">
                            <div>
                                <div class="field-label">Limit <span class="optional">(optional)</span></div>
                                <input type="number" id="sidebarConversationsLimit" placeholder="20" value="20">
                            </div>
                            <div>
                                <div class="field-label">Offset <span class="optional">(optional)</span></div>
                                <input type="number" id="sidebarConversationsOffset" placeholder="0" value="0">
                            </div>
                            <div>
                                <div class="field-label">Project Path <span class="optional">(optional)</span></div>
                                <input type="text" id="sidebarConversationsProjectPath" placeholder="/path/to/project">
                            </div>
                        </div>
                    </div>
                    <button onclick="listConversationsSidebar()">List Conversations</button>
                    <div id="sidebarConversationsResult" class="json-viewer-container"></div>
                </div>
            </div>
            
            <!-- List Permissions -->
            <div class="section">
                <div class="endpoint collapsible collapsed" onclick="toggleCollapse(this)">GET /api/permissions</div>
                <div class="collapsible-content">
                    <div class="field-group">
                        <div class="inline-fields">
                            <div>
                                <div class="field-label">Streaming ID <span class="optional">(optional)</span></div>
                                <input type="text" id="permissionsStreamingId" placeholder="streaming-id">
                            </div>
                            <div>
                                <div class="field-label">Status <span class="optional">(optional)</span></div>
                                <select id="permissionsStatus">
                                    <option value="">All</option>
                                    <option value="pending">Pending</option>
                                    <option value="approved">Approved</option>
                                    <option value="denied">Denied</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button onclick="listPermissions()">List Permissions</button>
                    <div id="permissionsResult" class="json-viewer-container"></div>
                </div>
            </div>

            <!-- List Directory -->
            <div class="section">
                <div class="endpoint collapsible collapsed" onclick="toggleCollapse(this)">GET /api/filesystem/list</div>
                <div class="collapsible-content">
                    <div class="field-group">
                        <div class="field-label">Path <span style="color: red;">*</span></div>
                        <input type="text" id="listPath" placeholder="/absolute/path/to/directory">
                    </div>
                    <button onclick="listDirectory()">List Directory</button>
                    <div id="listResult" class="json-viewer-container"></div>
                </div>
            </div>

            <!-- Read File -->
            <div class="section">
                <div class="endpoint collapsible collapsed" onclick="toggleCollapse(this)">GET /api/filesystem/read</div>
                <div class="collapsible-content">
                    <div class="field-group">
                        <div class="field-label">Path <span style="color: red;">*</span></div>
                        <input type="text" id="readPath" placeholder="/absolute/path/to/file.txt">
                    </div>
                    <button onclick="readFile()">Read File</button>
                    <div id="readResult" class="json-viewer-container"></div>
                </div>
            </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="main">
            <!-- Get Conversation Details -->
            <div class="section">
                <div class="endpoint">GET /api/conversations/:sessionId</div>
                <div class="field-group">
                    <div class="field-label">Session ID <span style="color: red;">*</span></div>
                    <select id="detailSessionIdDropdown" onchange="onSessionSelect('detailSessionId', 'detailSessionIdDropdown')" style="margin-bottom: 5px;">
                        <option value="">Select a session...</option>
                    </select>
                    <input type="text" id="detailSessionId" placeholder="claude-session-id or select from dropdown">
                </div>
                <button onclick="getConversationDetails()">Get Details</button>
                <div id="detailsResult" class="json-viewer-container"></div>
            </div>
            
            <!-- Stream -->
            <div class="section">
                <div class="endpoint">GET /api/stream/:streamingId</div>
                <div class="field-group">
                    <div class="field-label">Streaming ID <span style="color: red;">*</span></div>
                    <input type="text" id="streamingId" placeholder="streaming-id">
                </div>
                <button onclick="startStream()">Start Stream</button>
                <button onclick="stopStream()">Stop Stream</button>
                <button onclick="clearStream()">Clear</button>
                <div id="streamResult" class="stream-container"></div>
            </div>
        </div>
    </div>
</body>
</html>